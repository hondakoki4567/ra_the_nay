// ==UserScript==
// @name         m-z-g-t-o-o-n
// @namespace    m-z-g-t-o-o-n.user.js
// @version      2024.11.28
// @description  down m-z-g-t-o-o-n
// @author       You
// @include      /^https?:\/\/z\d+\.mzgt[o0]on\.com\/webt[o0]on\/*/*/
// @icon         https://raw.githubusercontent.com/hondakoki4567/ra_the_nay/main/m-z-g-t-o-o-n.png
// @require      https://cdn.jsdelivr.net/npm/@zip.js/zip.js@2.7.53/dist/zip.min.js
// @run-at       document-start
// @downloadURL  https://github.com/hondakoki4567/ra_the_nay/raw/main/m-z-g-t-o-o-n.user.js
// @updateURL    https://github.com/hondakoki4567/ra_the_nay/raw/main/m-z-g-t-o-o-n.meta.js
// ==/UserScript==

function a0_0x3f3f(){const _0x51a31b=['URL','/image','/img/','pathname','flex','image/jpeg','replace','https://github.com/NAgEustiCa/1_con_kien_2_con_kien/raw/main/tai_icon.png','textContent','getViewData','style','getUint32','/getViewData','ffd8ff','alignItems','href','split','BlobWriter','createElement','responseText','52494646','5753517PolcfS','appendChild','\x0a\x20\x20\x20\x20\x20\x20.tai-ve\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20animation:\x20heartbeat\x202s\x20infinite;\x20/*\x20Apply\x20the\x20heartbeat\x20animation\x20*/\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20transform-origin:\x20center;\x0a\x20\x20\x20\x20\x20\x20}\x0a\x0a\x20\x20\x20\x20\x20\x20@keyframes\x20heartbeat\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x200%\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20transform:\x20scale(1);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20opacity:\x201;\x20/*\x20Start\x20with\x20full\x20opacity\x20*/\x0a\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x2025%\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20opacity:\x200.7;\x20/*\x20Fade\x20out\x20slightly\x20at\x2025%\x20of\x20the\x20animation\x20*/\x0a\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x2050%\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20transform:\x20scale(1.2);\x20/*\x20Scale\x20up\x20at\x2050%\x20*/\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20opacity:\x201;\x20/*\x20Return\x20to\x20full\x20opacity\x20*/\x0a\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x2075%\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20opacity:\x200.7;\x20/*\x20Fade\x20out\x20slightly\x20at\x2075%\x20*/\x0a\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20100%\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20transform:\x20scale(1);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20opacity:\x201;\x20/*\x20End\x20with\x20full\x20opacity\x20*/\x0a\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20}\x0a\x20\x20','querySelector','stylesheet','close','cursor','absolute','addEventListener','#heartbeat','\x20/\x20','justifyContent','className','418mjUQiN','89504e47','view_data','name','_url','ZipWriter','6mNTAOT','mzgtoon','display','rel','1.5rem','div','push','.jpg','application/zip','innerHTML','2004685CPMvtw','translate(-50%)','entries','map','length','.png','remove','arrayBuffer','load','4252704XsWNrS','click','0.5rem','all','none','.status-num','/webtoondata/','BlobReader','3rem','.webp','view_image','\x0a\x20\x20\x20\x20\x20\x20\x20\x20.status-num\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20font-family:\x20\x27Acme\x27,\x20sans-serif\x20!important;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20font-size:\x203rem;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20color:\x20#FD7377;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20-webkit-text-stroke:\x201px\x20#C62428;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20border:\x200.2rem\x20solid\x20#167975;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20border-radius:\x201rem;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20padding:\x200\x202rem;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20background-color:\x20#F9FDFD;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20box-shadow:\x200.25rem\x200.4rem\x20#2E8B87;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20display:\x20none;\x0a\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20','head','status','application/octet-stream','view_title','.bin','9805256XwZsps','padStart','5444476ttOLXW','open','6247mRFaPO','gap','prototype','left','https://fonts.googleapis.com/css2?family=Acme&display=swap','tai-ve','webtoon','trim','10000','location','toString','top','call','includes','setAttribute','send','add','firstChild','parse','3339081lvGCnN','position'];a0_0x3f3f=function(){return _0x51a31b;};return a0_0x3f3f();}(function(_0x2f8ceb,_0x32caf5){const _0x591753=a0_0x2b8e,_0x1061eb=_0x2f8ceb();while(!![]){try{const _0x44d816=-parseInt(_0x591753(0x165))/0x1*(-parseInt(_0x591753(0x137))/0x2)+-parseInt(_0x591753(0x150))/0x3+parseInt(_0x591753(0x163))/0x4+-parseInt(_0x591753(0x147))/0x5+-parseInt(_0x591753(0x13d))/0x6*(-parseInt(_0x591753(0x18f))/0x7)+-parseInt(_0x591753(0x161))/0x8+parseInt(_0x591753(0x178))/0x9;if(_0x44d816===_0x32caf5)break;else _0x1061eb['push'](_0x1061eb['shift']());}catch(_0x680de2){_0x1061eb['push'](_0x1061eb['shift']());}}}(a0_0x3f3f,0xc71a0));function a0_0x2b8e(_0x352831,_0x23a1f6){const _0x3f3f82=a0_0x3f3f();return a0_0x2b8e=function(_0x2b8ef2,_0x121701){_0x2b8ef2=_0x2b8ef2-0x12c;let _0x2b8212=_0x3f3f82[_0x2b8ef2];return _0x2b8212;},a0_0x2b8e(_0x352831,_0x23a1f6);}let downloading_current=0x0,downloading_total=0x0,image_blobs,zip_title='';function saveBlob(_0x45f886,_0x18daf6){const _0xf7ff55=a0_0x2b8e,_0x154b5e=window[_0xf7ff55(0x17a)]['createObjectURL'](_0x45f886),_0x20e84e=document[_0xf7ff55(0x18c)]('a');_0x20e84e[_0xf7ff55(0x189)]=_0x154b5e,_0x20e84e['download']=_0x18daf6,_0x20e84e[_0xf7ff55(0x184)]['display']=_0xf7ff55(0x154),document['body'][_0xf7ff55(0x190)](_0x20e84e),_0x20e84e[_0xf7ff55(0x151)](),_0x20e84e[_0xf7ff55(0x14d)](),window['URL']['revokeObjectURL'](_0x154b5e),image_blobs=null;}function sleep(_0x4a671a){return new Promise(_0x4b3ae3=>setTimeout(_0x4b3ae3,_0x4a671a));}const download_not_encrypted=async(_0x48c83c,_0x2edbba)=>{const _0x47b7c2=a0_0x2b8e,_0x1795dc=await fetch(_0x48c83c),_0x525e28=await _0x1795dc[_0x47b7c2(0x14e)](),_0x16bf57=new DataView(_0x525e28),_0x3ca4dd=_0x16bf57[_0x47b7c2(0x185)](0x0,![])['toString'](0x10),_0x197534=(_0x16bf57[_0x47b7c2(0x185)](0x0,![])>>>0x8)[_0x47b7c2(0x16f)](0x10);let _0x4c4044=_0x47b7c2(0x160),_0x9edf8d=_0x47b7c2(0x15e);if(_0x3ca4dd===_0x47b7c2(0x18e))_0x4c4044=_0x47b7c2(0x159),_0x9edf8d='image/webp';else{if(_0x3ca4dd===_0x47b7c2(0x138))_0x4c4044=_0x47b7c2(0x14c),_0x9edf8d='image/png';else _0x197534===_0x47b7c2(0x187)&&(_0x4c4044=_0x47b7c2(0x144),_0x9edf8d=_0x47b7c2(0x17f));}let _0x147754=(''+(_0x2edbba+0x1))[_0x47b7c2(0x162)](0x3,'0')+_0x4c4044;const _0x2b1cab=new Blob([_0x525e28],{'type':_0x9edf8d});image_blobs[_0x47b7c2(0x143)]({'name':_0x147754,'blob':_0x2b1cab}),downloading_current+=0x1,downloading_current===downloading_total&&off_heartbeat_css(),update_status();};function update_status(){const _0x3189c0=a0_0x2b8e;document[_0x3189c0(0x12d)](_0x3189c0(0x155))[_0x3189c0(0x184)][_0x3189c0(0x13f)]=_0x3189c0(0x17e),document[_0x3189c0(0x12d)](_0x3189c0(0x155))[_0x3189c0(0x184)][_0x3189c0(0x188)]='center',document[_0x3189c0(0x12d)](_0x3189c0(0x155))[_0x3189c0(0x146)]=downloading_current+_0x3189c0(0x134)+downloading_total;}function create_status_box(){const _0x590fe5=a0_0x2b8e;let _0x279c27=document[_0x590fe5(0x18c)]('div');return _0x279c27[_0x590fe5(0x136)]='status-num',_0x279c27[_0x590fe5(0x182)]=downloading_current+_0x590fe5(0x134)+downloading_total,_0x279c27;}function create_download_icon(){const _0x16d228=a0_0x2b8e;let _0x25f1cd=document[_0x16d228(0x18c)](_0x16d228(0x142)),_0x410e64=document[_0x16d228(0x18c)]('img');_0x410e64[_0x16d228(0x136)]=_0x16d228(0x16a),_0x410e64[_0x16d228(0x173)]('src',_0x16d228(0x181)),_0x410e64[_0x16d228(0x184)]['width']=_0x16d228(0x158),_0x410e64[_0x16d228(0x184)][_0x16d228(0x130)]='pointer',_0x25f1cd[_0x16d228(0x190)](_0x410e64);let _0x2e3bd1=document[_0x16d228(0x18c)]('link');_0x2e3bd1[_0x16d228(0x140)]=_0x16d228(0x12e),_0x2e3bd1[_0x16d228(0x189)]=_0x16d228(0x169),document['getElementsByTagName'](_0x16d228(0x15c))[0x0]['appendChild'](_0x2e3bd1);let _0x145dbd=document[_0x16d228(0x18c)](_0x16d228(0x142));_0x145dbd['className']=_0x16d228(0x15d),_0x145dbd['style'][_0x16d228(0x13f)]=_0x16d228(0x17e),_0x145dbd['style'][_0x16d228(0x135)]='center',_0x145dbd[_0x16d228(0x184)][_0x16d228(0x188)]='center',_0x145dbd['style'][_0x16d228(0x166)]=_0x16d228(0x141),_0x145dbd[_0x16d228(0x184)][_0x16d228(0x179)]=_0x16d228(0x131),_0x145dbd[_0x16d228(0x184)]['zIndex']=_0x16d228(0x16d),_0x145dbd['style'][_0x16d228(0x170)]=_0x16d228(0x152),_0x145dbd[_0x16d228(0x184)][_0x16d228(0x168)]='50vw',_0x145dbd[_0x16d228(0x184)]['transform']=_0x16d228(0x148);let _0x1505db=create_status_box();const _0x305831=document['createElement'](_0x16d228(0x184));_0x305831[_0x16d228(0x182)]=_0x16d228(0x15b),document[_0x16d228(0x15c)]['appendChild'](_0x305831),_0x145dbd[_0x16d228(0x190)](_0x25f1cd),_0x145dbd[_0x16d228(0x190)](_0x1505db);let _0x22db9d=document[_0x16d228(0x12d)]('body'),_0x54d6c0=_0x22db9d[_0x16d228(0x176)];return _0x22db9d['insertBefore'](_0x145dbd,_0x54d6c0),_0x145dbd;}const throttlePromises=async(_0x3abb83,_0x32a10c)=>{const _0x47c711=a0_0x2b8e;while(_0x3abb83['length']>0x0){await Promise[_0x47c711(0x153)](_0x3abb83['splice'](0x0,_0x32a10c)[_0x47c711(0x14a)](_0x348da5=>_0x348da5())),await sleep(0xc8);}},on_heartbeat_css=()=>{const _0x426948=a0_0x2b8e;let _0x29469a=document[_0x426948(0x12d)](_0x426948(0x133));!_0x29469a&&(_0x29469a=document[_0x426948(0x18c)](_0x426948(0x184)),_0x29469a[_0x426948(0x173)]('id','heartbeat'),document[_0x426948(0x15c)]['appendChild'](_0x29469a)),_0x29469a['textContent']=_0x426948(0x12c);},off_heartbeat_css=()=>{const _0x4d4eb3=a0_0x2b8e,_0x351fee=document[_0x4d4eb3(0x12d)](_0x4d4eb3(0x133));_0x351fee[_0x4d4eb3(0x182)]='';},performFurtherActions=async _0x52d77a=>{const _0x5ab9fe=a0_0x2b8e,_0x26e4b8=[];for(const [_0x3e4262,_0x3b64e0]of _0x52d77a[_0x5ab9fe(0x15a)][_0x5ab9fe(0x149)]()){const _0x3dd685=new URL(window[_0x5ab9fe(0x16e)][_0x5ab9fe(0x189)])['origin'],_0x18e9a0=new URL(window['location'][_0x5ab9fe(0x189)])[_0x5ab9fe(0x17d)][_0x5ab9fe(0x18a)]('/'),_0x821334=_0x3dd685+_0x5ab9fe(0x156)+_0x18e9a0[0x2]+_0x5ab9fe(0x17c)+_0x18e9a0[0x3]+_0x5ab9fe(0x17b)+(_0x3e4262+0x1)+_0x5ab9fe(0x144);_0x26e4b8[_0x5ab9fe(0x143)](_0x821334);}if(_0x26e4b8[_0x5ab9fe(0x14b)]>0x0){downloading_total=_0x26e4b8[_0x5ab9fe(0x14b)];const _0xd7aa11=create_download_icon();_0xd7aa11[_0x5ab9fe(0x132)]('click',async()=>{const _0x4877ac=_0x5ab9fe;on_heartbeat_css(),downloading_current=0x0,image_blobs=[];const _0x54f6ad=_0x26e4b8['map']((_0x35d483,_0x1798d0)=>()=>download_not_encrypted(_0x35d483,_0x1798d0));await throttlePromises(_0x54f6ad,0x2);const _0x2e1076=new zip[(_0x4877ac(0x18b))](_0x4877ac(0x145)),_0x4cf0a4=new zip[(_0x4877ac(0x13c))](_0x2e1076);image_blobs['forEach'](async _0x59e42b=>{const _0x425e29=_0x4877ac;await _0x4cf0a4[_0x425e29(0x175)](_0x59e42b[_0x425e29(0x13a)],new zip[(_0x425e29(0x157))](_0x59e42b['blob']));});const _0x1d5972=await _0x4cf0a4[_0x4877ac(0x12f)]();saveBlob(_0x1d5972,zip_title+'.zip');});}},performFurther=function(_0x346933){let _0x4c2b48=![];return function(_0x3abac2){!_0x4c2b48&&(_0x4c2b48=!![],performFurtherActions(_0x3abac2));};}();(function(){'use strict';const _0x49c80f=a0_0x2b8e;const _0x4770ad={'getViewData':null};function _0x48c80(){const _0x75948e=a0_0x2b8e;if(_0x4770ad[_0x75948e(0x183)]){const _0x793ca8=JSON[_0x75948e(0x177)](_0x4770ad[_0x75948e(0x183)]),_0x19527c=_0x793ca8[_0x75948e(0x139)][0x0][_0x75948e(0x15f)],_0x5ce5a1=_0x793ca8[_0x75948e(0x139)][0x0][_0x75948e(0x16b)]['toon_title'];if(_0x19527c&&_0x5ce5a1)zip_title=(_0x5ce5a1+'\x20'+_0x19527c)[_0x75948e(0x16c)]()[_0x75948e(0x180)]('.','');else zip_title=_0x75948e(0x13e);performFurther(_0x793ca8);}}const _0x18044a=XMLHttpRequest[_0x49c80f(0x167)][_0x49c80f(0x164)],_0x3ce80f=XMLHttpRequest['prototype'][_0x49c80f(0x174)];XMLHttpRequest['prototype'][_0x49c80f(0x164)]=function(_0x2a80a2,_0x27311f,_0x3a7682,_0x5067eb,_0xd70903){const _0x644f0a=_0x49c80f;this['_method']=_0x2a80a2,this[_0x644f0a(0x13b)]=_0x27311f,_0x18044a[_0x644f0a(0x171)](this,_0x2a80a2,_0x27311f,_0x3a7682,_0x5067eb,_0xd70903);},XMLHttpRequest[_0x49c80f(0x167)][_0x49c80f(0x174)]=function(_0x5eec1c){const _0x105d37=_0x49c80f;this[_0x105d37(0x132)](_0x105d37(0x14f),function(){const _0x276709=_0x105d37;this['readyState']===0x4&&this[_0x276709(0x15d)]===0xc8&&(this['_url'][_0x276709(0x172)](_0x276709(0x186))&&(_0x4770ad[_0x276709(0x183)]=this[_0x276709(0x18d)],_0x48c80()));}),_0x3ce80f['call'](this,_0x5eec1c);};}());